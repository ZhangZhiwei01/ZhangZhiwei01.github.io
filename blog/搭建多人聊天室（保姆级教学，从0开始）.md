ç‚¹å‡»è¿”å›[ğŸ”—æˆ‘çš„åšå®¢æ–‡ç« ç›®å½•](https://percheung.github.io/#/toc)
* ç›®å½•
{:toc}
<div onclick="window.scrollTo({top:0,behavior:'smooth'});" style="background-color:white;position:fixed;bottom:20px;right:40px;padding:10px 10px 5px 10px;cursor:pointer;z-index:10;border-radius:13%;box-shadow:0.5px 3px 7px rgba(0,0,0,0.3);"><img src="https://percheung.github.io/blogImg/backTop.png" alt="TOP" style="background-color:white;width:30px;"></div>

# æ­å»ºå¤šäººèŠå¤©å®¤ï¼ˆä¿å§†çº§æ•™å­¦ï¼Œä»0å¼€å§‹ï¼‰

## 1.æˆ‘ä»¬éœ€è¦Node.js

å¼€å§‹å‡†å¤‡å·¥ä½œï¼Œä¸‹è½½node.jså§ã€‚

<div style="text-align: center;">
  <img src="https://percheung.github.io/blogImg/Nodejs.png" width="30%" alt="Node.js" />
</div>

æ³¨æ„ï¼šä¸€ä¼šå„¿è®°å¾—ç»™ä½ çš„npmå’ŒcnpmåŠ ä¸ªç¯å¢ƒå˜é‡ï¼Œ[åšå®¢å›­çš„node.jså®‰è£…é“¾æ¥åœ¨æ­¤](https://www.cnblogs.com/ewqv/p/6747269.html)ã€‚

å¥½çš„ï¼Œå¦‚æœä½ ç”¨è¿™ä¸ªä¿å§†çº§é“¾æ¥å®‰è£…node.jsä¾ç„¶æ²¡æœ‰çœŸæ­£æˆåŠŸï¼ˆä½ åé¢çš„èŠå¤©å®¤æ­å»ºä¸€å®šä¼šå‡ºç°é—®é¢˜ï¼‰ï¼Œåœ¨æˆ‘çš„å®è·µä¸‹ï¼Œé”™è¯¯å¤§æ¦‚æ˜¯ï¼š

1. ä¸è¦æŠŠnodeå®‰è£…åˆ°cç›˜ï¼Œcç›˜çš„æ–‡ä»¶æ“ä½œæ˜¯éœ€è¦ç®¡ç†å‘˜æƒé™çš„ï¼Œè€Œnodeçš„æ“ä½œæ˜¯ä¾èµ–ä½ çš„cmdé¢æ¿çš„ï¼Œä¸€èˆ¬æ¥è¯´cmdé¢æ¿ä¸€å¼€å§‹æ˜¯ä¸ä¼šå¼€å¯ç®¡ç†å‘˜æƒé™çš„ã€‚
2. å¦‚æœä½ çœŸçš„å®‰è£…åœ¨cç›˜ï¼Œåé¢å‡ºç°é—®é¢˜ï¼Œå¯ä»¥æ‰“å¼€cmdé¢æ¿çš„ç®¡ç†å‘˜æ¨¡å¼ï¼Œå†è¿›ä¸€æ­¥æ“ä½œä¸nodeæœ‰å…³çš„äº‹æƒ…ã€‚

## 2.å¼€å§‹å†™æˆ‘ä»¬çš„èŠå¤©å®¤å§
### 2.1 åœ¨æ¡Œé¢åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œåå­—ä¸ºapp

```bash
mkdir app
```

### 2.2 åœ¨appæ–‡ä»¶å¤¹å†…åˆ›å»ºä¸¤ä¸ªæ–‡ä»¶ï¼ˆä¸ç”¨å¾€é‡Œé¢å†™ä¸œè¥¿ï¼Œåˆ›å»ºå³å¯ï¼‰

#### 2.2.1 æŠŠè¿™æ®µä»£ç æ”¾å…¥index.htmlé‡Œï¼ˆè®°äº‹æœ¬æ‰“å¼€æ”¾å…¥å³å¯ï¼Œè‹¥ä½ æœ‰ç¼–è¯‘å™¨æ›´å¥½ï¼‰

> ä¸€ä¸ªå«index.htmlã€‚

```html
<!doctype html>
<html>

<head>
  <title>å®¢æˆ·ç¾¤èŠç•Œé¢</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'å¾®è½¯é›…é»‘'
    }

    #container {
      width: 100%;
      height: 1700px;
      background: #eee;
      position: relative;
      box-shadow: 40px 40px 110px #777;
    }

    .header {
      background: #25421ab0;
      height: 80px;
      color: #fff;
      line-height: 68px;
      font-size: 40px;
      padding: 0 20px;
    }


    body {
      width: 100%;
      background: #eee;
      position: relative;
      font: 60px;
    }

    form {
      background: #000;
      position: fixed;
      bottom: 0;
      width: 100%;
    }

    form input {
      border: 0;
      width: 80%;
      font-size: 40px;
    }

    form button {
      width: 20%;
      background: rgb(130, 224, 255);
      border: none;
      font-size: 40px;
    }

    #messages {
      list-style-type: none;
      margin: 0;
      padding: 0;
      font-size: 40px;
    }

    #messages li {
      padding: 5px 10px;
      font-size: 40px;
    }

    #messages li:nth-child(odd) {
      background: #eee;
    }
  </style>
  <script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
</head>

<body>
  <div class="header">
    <span style="float: left;">å®¢æˆ·äº¤æµå¹³å°</span>
    <!--<span style="float: right;">14:21</span>-->
  </div>
  <ul id="messages"></ul>
  <form action="">
    <input id="m" placeholder="è¯´ç‚¹ä»€ä¹ˆå§..." autocomplete="off" /><button>å‘é€</button>
  </form>
</body>

<script src="/socket.io/socket.io.js"></script>
<script>
  var name = prompt("è¯·è¾“å…¥ä½ çš„æ˜µç§°ï¼š");
  var socket = io()

  //å‘é€æ˜µç§°ç»™åç«¯ï¼Œå¹¶æ›´æ”¹ç½‘é¡µtitle
  socket.emit("join", name)
  document.title = name + "çš„ç¾¤èŠ"

  socket.on("join", function (user) {
    addLine(user + " åŠ å…¥äº†ç¾¤èŠ")
  })

  //æ¥æ”¶åˆ°æœåŠ¡å™¨å‘æ¥çš„messageäº‹ä»¶
  socket.on("message", function (msg) {
    addLine(msg)
  })

  //å½“å‘é€æŒ‰é’®è¢«ç‚¹å‡»æ—¶
  $('form').submit(function () {
    var msg = $("#m").val() //è·å–ç”¨æˆ·è¾“å…¥çš„ä¿¡æ¯
    socket.emit("message", msg) //å°†æ¶ˆæ¯å‘é€ç»™æœåŠ¡å™¨
    $("#m").val("") //ç½®ç©ºæ¶ˆæ¯æ¡†
    return false //é˜»æ­¢formæäº¤
  })

  function addLine(msg) {
    $('#messages').append($('<li>').text(msg));
  }
</script>

</html>
```

#### 2.2.2 ä¸‹é¢è¿™æ®µjsä»£ç å½“ç„¶æ˜¯æ”¾åˆ°server.jsä¸­äº†

> å¦ä¸€ä¸ªå«server.js

```javascript
var app = require('express')();
var http = require('http').Server(app);
var io = require('socket.io')(http);
var usocket = [];

app.get('/', function(req, res){
  res.sendFile(__dirname + '/index.html');
});

io.on('connection', function(socket){
  console.log('a user connected')

  socket.on("join", function (name) {
    usocket[name] = socket
    io.emit("join", name)
  })

  socket.on("message", function (msg) {
    io.emit("message", msg) //å°†æ–°æ¶ˆæ¯å¹¿æ’­å‡ºå»
  })

});

http.listen(3000, function() {
  console.log('listening on *:3000');
});
```
### 2.3 ç»™ä½ çš„æ–‡ä»¶å¤¹å®‰è£…ç‚¹ä¸œè¥¿

å½“å‰æ–‡ä»¶å¤¹ä¸‹è¿›å…¥`cmd`è¾“å…¥

```bash
cnpm install --save express
```
```bash
cnpm install --save socket.io
```
nodeèŠå¤©å®¤ç¯å¢ƒæ­å»ºå®Œæˆã€‚
## 3.å¤§åŠŸå‘Šæˆ
è¾“å…¥

```bash
node server.js
```
ä¸‹é¢å‡ºç°ä¸€å¥ listening *:3000

è‡³æ­¤ï¼Œä½ çš„é¢æ¿ä¸è¦å…³ï¼Œåªéœ€è¦æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥localhost:3000ï¼Œå³å¯è®¿é—®è‡ªå·±çš„èŠå¤©å®¤å•¦ã€‚

## 4.æœ€åä¸€ä¸ªé—®é¢˜
å½“ç„¶ï¼Œä½ çš„èŠå¤©å®¤ä¸ä»…ä»…å¸Œæœ›åªæœ‰è‡ªå·±çš„ç”µè„‘èƒ½è®¿é—®å§ï¼Œå®é™…ä¸Šï¼Œåªéœ€è¦ä½ çš„æœ‹å‹è·Ÿä½ åœ¨åŒä¸€å±€åŸŸç½‘å†…ï¼ˆé€šä¿—æ¥è¯´å°±æ˜¯è¿åŒä¸€ä¸ªWiFiï¼‰ï¼Œç„¶åä½ åœ¨é¢æ¿å†…è¿è¡Œä¸€å¥`node server.js`ï¼Œä½ çš„æœ‹å‹é€šè¿‡`ä½ çš„ç”µè„‘çš„ipåœ°å€:3000`ï¼ˆæˆ‘å°±ä¸ç¤ºèŒƒäº†ï¼Œæ¯•ç«Ÿæš´éœ²è‡ªå·±ç”µè„‘çš„ipå¤ªå±é™©å•¦ï¼‰å°±èƒ½è¹¦è¿›ä½ çš„èŠå¤©å®¤å’Œä½ èŠå¤©å•¦ï¼Œæ³¨æ„å•¦ï¼Œå°±æ˜¯æŠŠ`localhost`è¿™ä¸ªå•è¯æ¢æˆ`ä½ çœŸæ­£çš„ipåœ°å€`å°±å¯ä»¥å•¦ï¼å¦‚æœä½ å¸Œæœ›æ›´å¤šçš„äººè®¿é—®ä½ çš„èŠå¤©å®¤ï¼Œå°±æŠŠç½‘å€æ”¾ä¸ŠæœåŠ¡å™¨ã€‚

*æºç å°±æ˜¯æ–‡ç« é‡Œé¢é‚£ä¸ªhtmlå’Œjsã€‚*